Alpine.data("app",(function(){return{formProcedimento:{codigo:null,cd_procedimento:null,cod_procedimento:null,nm_procedimento:null,data:null,valor:null},procedimentos:[],entradasProcedimentos:[],deletingEntradaProcedimento:!1,init:function(){var o=this;this.procedimentos=procedimentos,$("#procedimento").on("select2:select",(function(e){o.formProcedimento.codigo=e.params.data.id;var n=e.params.data.element;o.formProcedimento.cod_procedimento=n.dataset.codigo,o.formProcedimento.cd_procedimento=n.dataset.codigo,o.formProcedimento.nm_procedimento=n.dataset.nome})),"undefined"!=typeof entradasProcedimentos&&(this.entradasProcedimentos=entradasProcedimentos),console.log(this.entradasProcedimentos)},submitConvenio:function(){document.querySelector("#formConvenio button[type=submit]").click()},limpar:function(){document.querySelector("#formConvenio").reset(),this.clearFormProcedimento()},clearFormProcedimento:function(){this.formProcedimento={cd_procedimento:null,dt_vigencia:null,valor:null},$("#procedimento").val(null).trigger("change")},addEntradaProcedimento:function(){this.entradasProcedimentos.push(Object.assign({},this.formProcedimento)),this.clearFormProcedimento(),console.log(this.entradasProcedimentos)},nomeProcedimento:function(o){var e;return null===(e=this.procedimentos.find((function(e){return o==e.cod_proc})))||void 0===e?void 0:e.nm_proc},codProc:function(o){var e;return null===(e=this.procedimentos.find((function(e){return o==e.cd_proc})))||void 0===e?void 0:e.cod_proc},deleteRepasse:function(o){Swal.fire({title:"Confirmação",text:"Tem certeza que deseja excluir esse repasse?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#22baa0",cancelButtonColor:"#d33",cancelButtonText:"Não",confirmButtonText:"Sim"}).then((function(e){location.href="/rpclinica/convenio-delete-repasse/".concat(o)}))},excluirEntradaProcedimento:function(o){var e=this;Swal.fire({title:"Confirmação",text:"Tem certeza que deseja excluir esse procedimento?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Não",confirmButtonText:"Sim"}).then((function(n){if(n.isConfirmed){if(e.entradasProcedimentos[o].cd_procedimento_convenio)return e.deletingEntradaProcedimento=!0,void axios.post("/rpclinica/procedimento-convenio-delete/".concat(e.entradasProcedimentos[o].cd_procedimento_convenio)).then((function(){e.entradasProcedimentos.splice(o,1),toastr.success("Procedimento excluído com sucesso!")})).catch((function(o){return toastr.error("Houve um error ao excluir o procedimento.")})).finally((function(){return e.deletingEntradaProcedimento=!1}));e.entradasProcedimentos.splice(o,1)}}))},formatValor:function(o){return Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format(o)}}}));