Alpine.data("app",(function(){return{loadingUsuario:!1,inputsUsuario:{email:null,nome:null,perfil:null,admin:"N",ativo:"S",celular:null,empresa:null,senha:null,resetar_senha:!1,enviar_email:!1,profissional:null,sn_todos_agendamentos:!1},isUsuario:null,init:function(){var i=this;$("#perfil-usuario").on("select2:select",(function(s){return i.inputsUsuario.perfil=s.params.data.id})),$("#admin-usuario").on("select2:select",(function(s){return i.inputsUsuario.admin=s.params.data.id})),$("#ativo-usuario").on("select2:select",(function(s){return i.inputsUsuario.ativo=s.params.data.id})),$("#ativo-profissional").on("select2:select",(function(s){return i.inputsProfissional.ativo=s.params.data.id})),$("#profissional-procedimento").on("select2:select",(function(s){return i.inputsProcedimento.cd_procedimento=s.params.data.id})),$("#profissional-convenio").on("select2:select",(function(s){return i.inputsProcedimento.cd_convenio=s.params.data.id})),$("#profissional-especialidade").on("select2:select",(function(s){return i.inputEspecialidade=s.params.data.id})),this.setUser(usuario)},setUser:function(i){},submitSave:function(){$('#formUsuario input[type="submit"]').click()},submitSaveUsuario:function(){var i=this;this.inputsUsuario.empresa=$("#empresa-usuario").val(),this.inputsUsuario.profissional=$("#prof-usuario").val(),this.inputsUsuario.ativo=$("#ativo-usuario").val(),this.inputsUsuario.perfil=$("#perfil-usuario").val();var s=Object.assign({},this.inputsUsuario);this.inputsUsuario.sn_profissional&&(s.profissional=Object.assign({},this.inputsProfissional)),this.loadingUsuario=!0,this.isUsuario?axios.post("/rpclinica/json/usuario-update/".concat(usuario.cd_usuario),s).then((function(i){return toastr.success(i.data.message)})).catch((function(i){return toastr.error(i.response.data.message)})).finally((function(){return i.loadingUsuario=!1})):axios.post("/rpclinica/json/usuario-store",s).then((function(i){toastr.success(i.data.message),console.log(i.data),setTimeout((function(){location.href="/rpclinica/usuario-listar"}),1e5)})).catch((function(i){return toastr.error(i.response.data.message)})).finally((function(){return i.loadingUsuario=!1}))},submitAddProcedimento:function(){var i,s=this;if(this.isUsuario&&null!==(i=usuario)&&void 0!==i&&i.profissional){var o=Object.assign({},this.inputsProcedimento);return o.cd_profissional=usuario.cd_profissional,void axios.post("/rpclinica/json/profissional-store-procedimento",o).then((function(i){o.cd_proc_prof=i.data.procedimento.cd_proc_prof,s.inputsProfissional.procedimentos.push(o),toastr.success(i.data.message),s.clearFormProcedimentos()})).catch((function(i){return toastr.error(i.response.data.message)}))}this.inputsProfissional.procedimentos.push(Object.assign({},this.inputsProcedimento)),this.clearFormProcedimentos()},deleteProcedimento:function(i){var s=this;Swal.fire({title:"Confirmação",text:"Deseja excluir esse procedimento?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Não",confirmButtonText:"Sim"}).then((function(o){if(o.isConfirmed){if(s.inputsProfissional.procedimentos[i].cd_proc_prof)return void axios.delete("/rpclinica/json/profissional-delete-procedimento/".concat(s.inputsProfissional.procedimentos[i].cd_proc_prof)).then((function(o){s.inputsProfissional.procedimentos.splice(i,1),toastr.success("Procedimento excluido com sucesso!")})).catch((function(i){return toastr.error(i.response.data.message)}));s.inputsProfissional.procedimentos.splice(i,1)}}))},clearFormProcedimentos:function(){this.inputsProcedimento={cd_procedimento:null,cd_convenio:null,valor:null,repasse:null},$("#profissional-procedimento").val(null).trigger("change"),$("#profissional-convenio").val(null).trigger("change")},submitAddEspecialidade:function(){var i,s=this;if(this.isUsuario&&null!==(i=usuario)&&void 0!==i&&i.profissional){var o={cd_especialidade:this.inputEspecialidade,cd_profissional:usuario.cd_profissional};axios.post("/rpclinica/json/profissional-store-especialidade",o).then((function(i){o.cd_prof_espec=i.data.especialidade.cd_prof_espec,s.inputsProfissional.especialidades.push(o),toastr.success(i.data.message),$("#profissional-especialidade").val(null).trigger("change")})).catch((function(i){return toastr.error(i.response.data.message)}))}else this.inputsProfissional.especialidades.push({cd_especialidade:this.inputEspecialidade}),$("#profissional-especialidade").val(null).trigger("change")},deleteEspecialidade:function(i){var s=this;Swal.fire({title:"Confirmação",text:"Deseja excluir esse especialidade?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Não",confirmButtonText:"Sim"}).then((function(o){if(o.isConfirmed){if(s.inputsProfissional.especialidades[i].cd_prof_espec)return void axios.delete("/rpclinica/json/profissional-delete-especialidade/".concat(s.inputsProfissional.especialidades[i].cd_prof_espec)).then((function(o){s.inputsProfissional.especialidades.splice(i,1),toastr.success("Especialidade excluida com sucesso!")})).catch((function(i){return toastr.error(i.response.data.message)}));s.inputsProfissional.especialidades.splice(i,1)}}))}}}));