Alpine.data("appPacienteDoc",(function(){var o=document.getElementById("data-formularios"),t=o?JSON.parse(o.textContent):[],e=document.getElementById("data-cd-paciente"),a=e?e.value:null,n=document.getElementById("data-route-add-doc"),r=n?n.value:"";return{loading:!1,modeloDocumentoQuery:"",dataDoc:{cd_pac:a,cd_formulario:null,conteudo:null},editor:null,get selectedModeloDocumentoLabel(){var o,e=this,a=t.find((function(o){return o.cd_formulario==e.dataDoc.cd_formulario}));return null!==(o=null==a?void 0:a.nm_formulario)&&void 0!==o?o:"Selecione"},get modeloDocumentoFiltrado(){var o,e=(null!==(o=this.modeloDocumentoQuery)&&void 0!==o?o:"").toString().trim().toLowerCase();return e?t.filter((function(o){var t;return(null!==(t=o.nm_formulario)&&void 0!==t?t:"").toString().toLowerCase().includes(e)})):t},init:function(){var o=this;this.editor=CKEDITOR.replace("editor",{toolbar:[{name:"clipboard",items:["Undo","Redo"]},{name:"basicstyles",items:["Bold","Italic","Underline","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize"]}]}),this.$watch("dataDoc.cd_formulario",(function(){var e,a;o.editor.setData(null!==(e=null===(a=t.find((function(t){return t.cd_formulario==o.dataDoc.cd_formulario})))||void 0===a?void 0:a.conteudo_atual)&&void 0!==e?e:"")}))},openModeloDocumentoPicker:function(){var o,t=this,e=document.getElementById("modalModeloDocumento");e&&"undefined"!=typeof bootstrap&&null!==(o=bootstrap)&&void 0!==o&&o.Modal&&(bootstrap.Modal.getOrCreateInstance(e).show(),setTimeout((function(){var o;null!==(o=t.$refs)&&void 0!==o&&o.modeloDocumentoSearch&&t.$refs.modeloDocumentoSearch.focus()}),150))},selectModeloDocumento:function(o){var t;this.dataDoc.cd_formulario=o,this.modeloDocumentoQuery="";var e=document.getElementById("modalModeloDocumento");e&&"undefined"!=typeof bootstrap&&null!==(t=bootstrap)&&void 0!==t&&t.Modal&&bootstrap.Modal.getOrCreateInstance(e).hide()},saveDoc:function(){var o,e=this;if(this.dataDoc.cd_formulario){this.loading=!0;var a=Object.assign({},this.dataDoc);a.conteudo=this.editor.getData(),a.nm_formulario=null===(o=t.find((function(o){return o.cd_formulario==a.cd_formulario})))||void 0===o?void 0:o.nm_formulario,axios.post(r,a).then((function(o){toastr.success(o.data.message),e.dataDoc.cd_formulario=null,e.dataDoc.conteudo=null,e.editor.setData("")})).catch((function(o){return parseErrorsAPI(o)})).finally((function(){return e.loading=!1}))}else toastr.error("Selecione um modelo de documento.")}}}));